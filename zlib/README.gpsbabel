modified subset of zlib-1.3.1 from zlib.net.
note that zlib 1.2.8 has a seek bug that will bite us.
other changes after zlib 1.2.8 may be required as well.
