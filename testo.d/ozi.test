
# OZI (OziExplorer 1.1) file format
rm -f ${TMPDIR}/oz.wpt ${TMPDIR}/ozi.wpt
gpsbabel -i ozi -f ${REFERENCE}/ozi.wpt -o ozi -F ${TMPDIR}/oz.wpt
gpsbabel -i ozi -f ${TMPDIR}/oz.wpt -o ozi -F ${TMPDIR}/ozi.wpt
compare ${TMPDIR}/ozi.wpt ${REFERENCE}

# Test Ozi routes.
gpsbabel -i ozi -f ${REFERENCE}/route/ozi.rte -o gpx -F ${TMPDIR}/ozi~gpx.gpx
compare ${TMPDIR}/ozi~gpx.gpx ${REFERENCE}/route/
gpsbabel -i ozi -f ${REFERENCE}/route/ozi.rte -o ozi -F ${TMPDIR}/ozi~rte.rte
compare ${REFERENCE}/route/ozi~rte.rte ${TMPDIR}/ozi~rte.rte

# Test Ozi tracks.
gpsbabel -i ozi -f ${REFERENCE}/track/20070813_short.plt -o gpx -F ${TMPDIR}/20070813_short~plt.gpx
compare ${REFERENCE}/track/20070813_short~plt.gpx ${TMPDIR}/20070813_short~plt.gpx
gpsbabel -i ozi -f ${REFERENCE}/track/20070813_short.plt -o ozi -F ${TMPDIR}/20070813_short~plt.plt
compare ${REFERENCE}/track/20070813_short~plt.plt ${TMPDIR}/20070813_short~plt.plt

# test ozi tracks with multilple tracks which will be written to separate files
gpsbabel -i gpx -f ${REFERENCE}/track/ozitracks.gpx -o ozi -F ${TMPDIR}/ozitracks~gpx.plt
compare ${REFERENCE}/track/ozitracks~gpx.plt ${TMPDIR}/ozitracks~gpx.plt
compare ${REFERENCE}/track/ozitracks~gpx-1.plt ${TMPDIR}/ozitracks~gpx-1.plt
compare ${REFERENCE}/track/ozitracks~gpx-2.plt ${TMPDIR}/ozitracks~gpx-2.plt

# test ozi with no output making sure we don't throw an error or segmentation fault.
gpsbabel -i gpx -f ${REFERENCE}/track/ozitracks.gpx -x nuketypes,waypoints,tracks,routes -o ozi -F ${TMPDIR}/empty.plt

# test sn options
gpsbabel -s -i xcsv,style=${REFERENCE}/mkshort.style -f reference/mkshort.csv -o ozi,snunique=0,snupper=0,snwhite=0 -F ${TMPDIR}/ozi000.wpt
compare ${REFERENCE}/ozi000.wpt ${TMPDIR}/ozi000.wpt
gpsbabel -s -i xcsv,style=${REFERENCE}/mkshort.style -f reference/mkshort.csv -o ozi,snunique=1,snupper=0,snwhite=0 -F ${TMPDIR}/ozi100.wpt
compare ${REFERENCE}/ozi100.wpt ${TMPDIR}/ozi100.wpt
gpsbabel -s -i xcsv,style=${REFERENCE}/mkshort.style -f reference/mkshort.csv -o ozi,snunique=0,snupper=1,snwhite=0 -F ${TMPDIR}/ozi010.wpt
compare ${REFERENCE}/ozi010.wpt ${TMPDIR}/ozi010.wpt
gpsbabel -s -i xcsv,style=${REFERENCE}/mkshort.style -f reference/mkshort.csv -o ozi,snunique=0,snupper=0,snwhite=1 -F ${TMPDIR}/ozi001.wpt
compare ${REFERENCE}/ozi001.wpt ${TMPDIR}/ozi001.wpt
