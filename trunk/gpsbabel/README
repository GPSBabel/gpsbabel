
THE PROBLEM

	There are simply too many gratituosuly different file formats to 
	hold waypoint and route information in various programs used by 
	computers.  GPX (http://www.topografix.com/gpx.asp) attempts to 
	define a standard in XML to contain all the data, but there are 
	too many programs that don't understand it yet and too much data 
	that are in an alternate format.

THE SOLUTION

	I needed to convert waypoints between a couple of formats, so
	I whipped up a converter and based it on an extensible foundation
	so that it was easy to add new formats.  Most file formats added
	so far have taken under 200 lines of reasonable ISO C so they can
	be stamped out pretty trivially. 

THE FORMATS

    GPX 

	This is the most capable and expressive of all the file formats
	supplied.    It is described at http://www.topografix.com/gpx.asp
	and is supported by EasyGPS, ExpertGPS, and man other programs
	described at http://www.topografix.com/gpx_resources.asp

    GEO

	geocaching.com spits up geocaching.loc files that are XML-ish but
	not quite GPX.   Becuase it's so close to GPX, this format is very
	well supported.

    MAGELLAN

	Waypoint serial upload and download works reliably to the 315, 330, 
	Meridian, and SportTrak family.  I expect it to work on any modern
	Magellan unit.

	As of 08/30/02, gpsbabel can also read and write the files that
	can be stuck on the flash memory parts for the Meridian models.
	Simply specify a file instead of a serial port.

	As of this writing, there is still a lot of "scribbling" in the 
	source for functionality that isn't hooked up to the rest of the
	program.    Communication errors are handled and verification of
	data is turned on.
	
    GPSMAN

	GPS Manager can read and write formats that this converter doesn't
	understand.  The default formats (WGS84, DDD) work reliably.

    GPSUTIL

	GPSUtil has a simple file format of this program that runs on POSIX-
	compliant OSes like UNIX and Linux.   Reads and writes of this format
	are reliable.   (I've also contributed to this program.)  It's 	
	available at http://www.cs.uakron.edu/~hennings/gpsutil/.

    TIGER

	The U.S. Census Bureau proives online mapping facilities.  This
	format is described at: http://tiger.census.gov/instruct.html.

    CSV

	There are a billion variants of Comma Separated Value data.  This
	is the one that makes Delorme S&A Deluxe 9 happy.

    MAPSEND

	Magellan was smart enough to document their file format to make
	creating software like this possible.   It reads and writes only 
	waypoints (not routes) at this time.

    PCX

	Garmin documents only PCX5, an older format limited to the lame NMEA
	six-character waypoint names that's treated as a second-class citizien
	in current versions of MapSource.  Use file->import to read these 
	files.   Anyone with information on the *.mps file format that is
	now preferred is encouraged to contact me with the details or better
	yet, a module that implements it.   I spent time trying to reverse-
	engineer a couple of *.mps files then I remembered that I don't own
	a Garmin and wasn't that inspired.

    CETUS

	Cetus GPS (http://www.cetusgps.dk/) is a program for Palm/OS.  
	Working with Ron Parker and Kjeld Jensen, we can now read and write
	files for that program.   It hasn't been exhaustively tested, but 
	has seemed fine on every input and output we've tried.

    GPSPILOT

	The file format for GPSPILOT (http://www.gpspilot.com) was provided
	by Ron Parker.  GPSbabel can currently read gpspilot files, but not
	write them.
	
    PSP

	Microsoft's PocketStreets 2002 Pushpin (.PSP) format is not yet 
	completely documented.  THE .PSP MODULE DOES NOT WORK WITH MS 
	STREETS & TRIPS 2002 .EST FILES.  To create .PSP files from 
        Streets & Trips 2002, you will need to have PocketStreets support 
	installed.  Please note that MS Streets & Trips only *EXPORTS* 
	.PSP files. It does not import them.  MS Streets & Trips 2002 
	only imports CSV files.  To use .PSP files, simply copy them 
	over to the same folder on the mobile device as the map (.MPS), 
	and open PocketStreets.  It should also be noted that in the case 
	a pushpin is outside of the exported map area, the pin will be 
	"grayed-out" and unused in PocketStreets.  This is a good thing 
	as it allows us to create one big .PSP file that covers multiple 
	.MPS files.  Unfortunately, you need one .PSP file for every 
	.MPS file. :(

    MXF

	Maptech Exchange Format - Another CSV format file.  This format
	complies with (at least) Maptech Terrain Navigator, Terrain
	Professional, Take a Hike, and ExpertGPS import/export MFX.

  Maptech MXF
	Maptech's MXF is a CSV on steroids.  Contributed by Alex Mottram.


COMMON USAGE

	Invocation was meant to be flexible.   Unfortunately, that can
	sometimes lead to unwieldy command lines.

		gpsbabel -? 

	will always show you the supported file types.   To use this
	program, just tell it what you're reading, where to read it from,
	what you're writing, and what to write it to.  For example:

	gpsbabel -i geo -f /tmp/geocaching.loc -o gpx -F /tmp/geocaching.gpx

	tells it to read the first file in geocaching.com format and create
	a new file in GPX format.

	This command will read from a Magellan unit attached to the first
	serial port on a Linux system (device names will vary on other OSes)
	and write them as a geocaching loc file.  The second command does 
	the same for windows.

	gpsbabel -i magellan -f /dev/ttyS0 -o geo -F mag.loc
	gpsbabel -i magellan -f com1 -o geo -F mag.loc
	

	Optionally, you may specify "-s" in any command line.  This causes
	the program to ignore any "short" names that may be present in the
	source data format and synthesize one from the long name.  This
	is particularly useful if you're writing to a target format that 
	isn't the lowest common denominator but the source data was written
	for the lowest common denominator.   I use this for writing data
	from geocaching.com to my Magellan so my waypoints have "real" names
	instead of the 'GC1234' ones that are optimized for NMEA-only 
	receivers.   A geocacher with a Magellan receiver may thus find
	commands like this useful.

	gpsbabel -s -i geo -f geocaching.loc -o magellan -F /dev/ttyS0 
	gpsbabel -s -i geo -f geocaching.loc -o magellan -F com1

ADVANCED USAGE

	Argument are processed in the order they appear on the command line.
	Input is cumulative.  The input file type remains unchanged until a 
	new -i argument is seen.  Files are read in the order they appear.  
	So you could merge three input files into one output file with:
	
	gpsbabel -i geo 1.loc 2.loc 3.loc -o geo -F big.loc

	You can merge files of different types:

	gpsbabel  -i geo 1.loc -i gpx 2.gpx -i pcx 3.pcx -o gpsutil -F big.gps

	You can write the same data in different output formats:

	gpsbabel -i geo 1.loc -o gpx -F 1.gpx -o pcx 1.wpt
